// TAC Life Support patch for FusTek Station Parts
// Author: Robin "sumghai" Chang
// Revision: 1.3

// Compiled with advice and assistance of KSP forum users: taniwha, NathanKell, sharpspoonful, Moon Goddess, Spann3r, Read have Read, Starwaster,
// Riverey, BananaDealer, Raptor831, futrtrubl, aristurtle, FiiZzioN and RedAV8R (plus anyone else whose name I may have misplaced)

// Modules that are habitable (i.e. can hold crew)

@PART[FusTekKarmonyHabModule*]:NEEDS[TACLifeSupport]
{
	MODULE
	{
		name = TacGenericConverter
		converterName = Carbon Extractor
		conversionRate = 8
		inputResources = CarbonDioxide, 1, ElectricCharge, 1000
		outputResources = Oxygen, 0.9, false, Waste, 2.218, true
	}
	
	RESOURCE
    {
        name = Food
        amount = 40
        maxAmount = 40
    }
    RESOURCE
    {
        name = Water
        amount = 40
        maxAmount = 40
    }
    RESOURCE
    {
        name = Oxygen
        amount = 40
        maxAmount = 40
    }
    RESOURCE
    {
        name = Waste
        amount = 0
        maxAmount = 40
    }
    RESOURCE
    {
        name = WasteWater
        amount = 0
        maxAmount = 40
    }
    RESOURCE
    {
        name = CarbonDioxide
        amount = 0
        maxAmount = 40
    }
}

@PART[FusTekKarmonySciModule*]:NEEDS[TACLifeSupport]
{
    MODULE
	{
		name = TacGenericConverter
		converterName = Carbon Extractor
		conversionRate = 8
		inputResources = CarbonDioxide, 1, ElectricCharge, 1000
		outputResources = Oxygen, 0.9, false, Waste, 2.218, true
	}
	
    RESOURCE
    {
        name = Water
        amount = 40
        maxAmount = 40
    }
    RESOURCE
    {
        name = Oxygen
        amount = 40
        maxAmount = 40
    }
    RESOURCE
    {
        name = CarbonDioxide
        amount = 0
        maxAmount = 40
    }
}

@PART[FusTekKuest*]:NEEDS[TACLifeSupport]
{
    MODULE
	{
		name = TacGenericConverter
		converterName = Carbon Extractor
		conversionRate = 4
		inputResources = CarbonDioxide, 0.5, ElectricCharge, 500
		outputResources = Oxygen, 0.45, false, Waste, 1.109, true
	}
	
	RESOURCE
    {
        name = Food
        amount = 2
        maxAmount = 2
    }
    RESOURCE
    {
        name = Water
        amount = 2
        maxAmount = 2
    }
    RESOURCE
    {
        name = Oxygen
        amount = 10
        maxAmount = 10
    }
    RESOURCE
    {
        name = CarbonDioxide
        amount = 0
        maxAmount = 10
    }
}

@PART[FusTekKupolaObsModule]:NEEDS[TACLifeSupport]
{
	MODULE
	{
		name = TacGenericConverter
		converterName = Carbon Extractor
		conversionRate = 4
		inputResources = CarbonDioxide, 0.5, ElectricCharge, 500
		outputResources = Oxygen, 0.45, false, Waste, 1.109, true
	}
    RESOURCE
    {
        name = Oxygen
        amount = 10
        maxAmount = 10
    }
    RESOURCE
    {
        name = CarbonDioxide
        amount = 0
        maxAmount = 10
    }
}

@PART[FusTekKarmonyUtilModule*]:NEEDS[TACLifeSupport]
{
	MODULE
	{
		name = TacGenericConverter
		converterName = Carbon Extractor
		conversionRate = 16
		inputResources = CarbonDioxide, 1, ElectricCharge, 2000
		outputResources = Oxygen, 1.8, false, Waste, 4.436, true
	}

	MODULE
	{
		name = TacGenericConverter
		converterName = Water Purifier
		conversionRate = 8
		inputResources = WasteWater, 1, ElectricCharge, 1000
		outputResources = Water, 0.9, false, Waste, 6.382, true
	}
		
    RESOURCE
    {
        name = Water
        amount = 80
        maxAmount = 80
    }
    RESOURCE
    {
        name = Oxygen
        amount = 80
        maxAmount = 80
    }
    RESOURCE
    {
        name = Waste
        amount = 0
        maxAmount = 80
    }
    RESOURCE
    {
        name = WasteWater
        amount = 0
        maxAmount = 80
    }
    RESOURCE
    {
        name = CarbonDioxide
        amount = 0
        maxAmount = 80
    }
}

// Modules that cannot hold crew, but allow crew access to other modules

@PART[FusTekKarmonyStorModule*]:NEEDS[TACLifeSupport]
{
    MODULE
	{
		name = TacGenericConverter
		converterName = Carbon Extractor
		conversionRate = 8
		inputResources = CarbonDioxide, 1, ElectricCharge, 1000
		outputResources = Oxygen, 0.9, false, Waste, 2.218, true
	}
	
	RESOURCE
    {
        name = Food
        amount = 360
        maxAmount = 360
    }
    RESOURCE
    {
        name = Water
        amount = 360
        maxAmount = 360
    }
    RESOURCE
    {
        name = Oxygen
        amount = 360
        maxAmount = 360
    }
    RESOURCE
    {
        name = Waste
        amount = 0
        maxAmount = 360
    }
    RESOURCE
    {
        name = WasteWater
        amount = 0
        maxAmount = 360
    }
    RESOURCE
    {
        name = CarbonDioxide
        amount = 0
        maxAmount = 360
    }
}

@PART[FusTekKarmonyNodeMkIII*]:NEEDS[TACLifeSupport]
{
    MODULE
	{
		name = TacGenericConverter
		converterName = Carbon Extractor
		conversionRate = 8
		inputResources = CarbonDioxide, 1, ElectricCharge, 1000
		outputResources = Oxygen, 0.9, false, Waste, 2.218, true
	}
    RESOURCE
    {
        name = Oxygen
        amount = 20
        maxAmount = 20
    }
    RESOURCE
    {
        name = CarbonDioxide
        amount = 0
        maxAmount = 20
    }
}

@PART[FusTekKarmonyCompactNodeMkIII*]:NEEDS[TACLifeSupport]
{
    MODULE
	{
		name = TacGenericConverter
		converterName = Carbon Extractor
		conversionRate = 8
		inputResources = CarbonDioxide, 1, ElectricCharge, 1000
		outputResources = Oxygen, 0.9, false, Waste, 2.218, true
	}
    RESOURCE
    {
        name = Oxygen
        amount = 10
        maxAmount = 10
    }
    RESOURCE
    {
        name = CarbonDioxide
        amount = 0
        maxAmount = 10
    }
}

// Resupply ATV
// 
// This consists of a pressurized compartment holding for fixed amounts of life support / crew provisions (i.e. a "standardized" food/water/air replenishment package)


TANK_DEFINITION
{
    name = FusTekResupply_RearSection
    basemass = -1
    TANK
    {
      name = LiquidFuel
      amount = 0.0
      maxAmount = 0.0
      utilization = 1
    }
    TANK
    {
      name = Oxidizer
      amount = 0.0
      maxAmount = 0.0
      utilization = 1
    }
    TANK
    {
      name = MonoPropellant
      mass = 0.000625
      amount = 0.0
      maxAmount = 0.0
      utilization = 1.25
    }
    TANK
    {
      name = XenonGas
      mass = 0.000625
      amount = 0.0
      maxAmount = 0.0
      utilization = 50
       note = (pressurized)
    }
}

@PART[FusTekResupplyModule]:NEEDS[ModularFuelTanks|RealFuels]
{   
	MODULE
    {
        name = ModuleFuelTanks
        volume = 160
        type = FusTekResupply_RearSection
    }
}

@PART[FusTekResupplyModule]:NEEDS[TACLifeSupport]
{    
    RESOURCE
    {
        name = Food
        amount = 400
        maxAmount = 400
    }
    RESOURCE
    {
        name = Water
        amount = 400
        maxAmount = 400
    }
    RESOURCE
    {
        name = Oxygen
        amount = 400
        maxAmount = 400
    }
    RESOURCE
    {
        name = Waste
        amount = 0
        maxAmount = 400
    }
    RESOURCE
    {
        name = WasteWater
        amount = 0
        maxAmount = 400
    }
    RESOURCE
    {
        name = CarbonDioxide
        amount = 0
        maxAmount = 400
    }
}